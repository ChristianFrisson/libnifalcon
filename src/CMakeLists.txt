SET(FTD2XX_SRCS nifalcon_ftd2xx.c)
SET(LIBFTDI_SRCS nifalcon_libftdi.c)
SET(LIBRARY_SRCS nifalcon_test_fw.c)
SET_SOURCE_FILES_PROPERTIES (${LIBFTDI_SRCS} PROPERTIES COMPILE_FLAGS -DLIBFTDI)
ADD_LIBRARY (nifalcon_ftd2xx_static STATIC ${FTD2XX_SRCS} ${LIBRARY_SRCS})
ADD_LIBRARY (nifalcon_ftd2xx_shared SHARED ${FTD2XX_SRCS} ${LIBRARY_SRCS})
ADD_LIBRARY (nifalcon_libftdi_static STATIC ${LIBFTDI_SRCS} ${LIBRARY_SRCS})
ADD_LIBRARY (nifalcon_libftdi_shared SHARED ${LIBFTDI_SRCS} ${LIBRARY_SRCS})
SET_TARGET_PROPERTIES (nifalcon_ftd2xx_static PROPERTIES OUTPUT_NAME ${LIBNIFALCON_FTD2XX}_s)
SET_TARGET_PROPERTIES (nifalcon_ftd2xx_shared PROPERTIES OUTPUT_NAME ${LIBNIFALCON_FTD2XX})
SET_TARGET_PROPERTIES (nifalcon_libftdi_static PROPERTIES OUTPUT_NAME ${LIBNIFALCON_LIBFTDI}_s)
SET_TARGET_PROPERTIES (nifalcon_libftdi_shared PROPERTIES OUTPUT_NAME ${LIBNIFALCON_LIBFTDI})

SET_TARGET_PROPERTIES (nifalcon_libftdi_shared PROPERTIES VERSION ${LIBNIFVERSION})
SET_TARGET_PROPERTIES (nifalcon_ftd2xx_shared PROPERTIES VERSION ${LIBNIFVERSION})

IF(NOT WIN32)
  INSTALL(TARGETS nifalcon_libftdi_static nifalcon_libftdi_shared nifalcon_ftd2xx_static nifalcon_ftd2xx_shared LIBRARY DESTINATION "/usr/local/lib" ARCHIVE DESTINATION "/usr/local/lib")
  INSTALL(FILES nifalcon.h nifalcon_test_fw.h DESTINATION "/usr/local/include")
  IF(APPLE)
	SET_TARGET_PROPERTIES(nifalcon_libftdi_dynamic PROPERTIES INSTALL_NAME_DIR "/usr/local/lib")
	SET_TARGET_PROPERTIES(nifalcon_ftd2xx_dynamic PROPERTIES INSTALL_NAME_DIR "/usr/local/lib")
#	SET_TARGET_PROPERTIES(nifalcon_dynamic PROPERTIES LINK_FLAGS "-compatibility_version 1.0.0 -current_version 1.${LIBNIFVERSION}")
  ENDIF(APPLE)
ENDIF(NOT WIN32)
TARGET_LINK_LIBRARIES(nifalcon_libftdi_static ${LIBFTDI})
TARGET_LINK_LIBRARIES(nifalcon_libftdi_shared ${LIBFTDI})
TARGET_LINK_LIBRARIES(nifalcon_ftd2xx_static ${LIBFTD2XX})
TARGET_LINK_LIBRARIES(nifalcon_ftd2xx_shared ${LIBFTD2XX})

