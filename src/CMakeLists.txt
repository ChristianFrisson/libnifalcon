SET(SRCS nifalcon.c nifalcon_test_fw.c)
ADD_LIBRARY (nifalcon STATIC ${SRCS})
ADD_LIBRARY (nifalcon_dynamic SHARED ${SRCS})
SET_TARGET_PROPERTIES (nifalcon PROPERTIES CLEAN_DIRECT_OUTPUT 1)
SET_TARGET_PROPERTIES (nifalcon_dynamic PROPERTIES OUTPUT_NAME "nifalcon")
SET_TARGET_PROPERTIES (nifalcon_dynamic PROPERTIES CLEAN_DIRECT_OUTPUT 1)
SET_TARGET_PROPERTIES (nifalcon_dynamic PROPERTIES VERSION ${LIBNIFVERSION})
IF(NOT WIN32)
  INSTALL(TARGETS nifalcon nifalcon_dynamic LIBRARY DESTINATION "/usr/local/lib" ARCHIVE DESTINATION "/usr/local/lib")
  INSTALL(FILES nifalcon.h nifalcon_test_fw.h DESTINATION "/usr/local/include")
  IF(APPLE)
	SET_TARGET_PROPERTIES(nifalcon_dynamic PROPERTIES INSTALL_NAME_DIR "/usr/local/lib")
	SET_TARGET_PROPERTIES(nifalcon_dynamic PROPERTIES LINK_FLAGS "-compatibility_version 1.0.0 -current_version 1.${LIBNIFVERSION}")
  ENDIF(APPLE)
ENDIF(NOT WIN32)
TARGET_LINK_LIBRARIES(nifalcon ${LIBFTDINAME})
TARGET_LINK_LIBRARIES(nifalcon_dynamic ${LIBFTDINAME})


