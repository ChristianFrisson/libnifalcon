SET(LIBRARY_SRCS core/FalconDevice.cpp firmware/FalconFirmwareNovintSDK.cpp)

INSTALL(FILES core/FalconDevice.h core/FalconComm.h core/FalconFirmware.h core/FalconGrip.h core/FalconKinematic.h DESTINATION ${INCLUDE_INSTALL_DIR}/falcon/core)
INSTALL(FILES firmware/FalconFirmwareNovintSDK.h DESTINATION  ${INCLUDE_INSTALL_DIR}/falcon/firmware)
INSTALL(FILES grip/FalconGripFourButton.h DESTINATION ${INCLUDE_INSTALL_DIR}/falcon/grip)

INCLUDE_DIRECTORIES(.)

SET(NIF_COMPILE_FLAGS)
SET(NIF_LINK_FLAGS)

MACRO(BUILD_NIFALCON_CPP LIB_TYPE)
  SET(NIFALCON_LIB nifalcon_cpp_${LIB_TYPE})
  ADD_LIBRARY (${NIFALCON_LIB} ${LIB_TYPE} ${LIBRARY_SRCS})
  SET_TARGET_PROPERTIES (${NIFALCON_LIB} PROPERTIES OUTPUT_NAME ${LIBNIFALCON_CPP})
  SET_TARGET_PROPERTIES (${NIFALCON_LIB} PROPERTIES CLEAN_DIRECT_OUTPUT 1)
  SET_TARGET_PROPERTIES (${NIFALCON_LIB} PROPERTIES VERSION ${LIBNIFALCON_VERSION})
  IF(NOT WIN32)
	INSTALL(TARGETS ${NIFALCON_LIB} LIBRARY DESTINATION ${LIBRARY_INSTALL_DIR} ARCHIVE DESTINATION ${LIBRARY_INSTALL_DIR})
	IF(APPLE)
	  SET_TARGET_PROPERTIES(${NIFALCON_LIB} PROPERTIES INSTALL_NAME_DIR ${LIBRARY_INSTALL_DIR})
	ENDIF(APPLE)
  ENDIF(NOT WIN32)
ENDMACRO(BUILD_NIFALCON_CPP)

FOREACH(LIB_TYPE STATIC SHARED)
  BUILD_NIFALCON_CPP(${LIB_TYPE})
ENDFOREACH(LIB_TYPE)

ADD_SUBDIRECTORY(comm)
ADD_SUBDIRECTORY(kinematic)
ADD_SUBDIRECTORY(util)