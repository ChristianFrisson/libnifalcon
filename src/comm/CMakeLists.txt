######################################################################################
# Build function for communications libraries
######################################################################################

SET(DEBUG_DEFINES FALSE)

IF(WIN32)
  SET(DEBUG_DEFINES "-DFTD2XX_WINDOWS")
ENDIF(WIN32)

IF(LIBUSB_DEBUG)
  SET(DEBUG_DEFINES "-DLIBUSB_DEBUG")
ENDIF(LIBUSB_DEBUG)

IF(LIBUSB_1_FOUND)
  BUILD_LIB(${LIBNIFALCON_CPP_COMM_PREFIX}_libusb "${BUILD_TYPES}" "FalconCommLibUSB.cpp" ${DEBUG_DEFINES} "${LIBUSB_1_LIBRARIES}" FALSE)
ENDIF(LIBUSB_1_FOUND)

IF(LIBFTDI_FOUND)
  BUILD_LIB(${LIBNIFALCON_CPP_COMM_PREFIX}_libftdi "${BUILD_TYPES}" "FalconCommLibFTDI.cpp" ${DEBUG_DEFINES} "${LIBFTDI_LIBRARIES}" FALSE)
ENDIF(LIBFTDI_FOUND)

IF(LIBFTD2XX_FOUND)
  BUILD_LIB(${LIBNIFALCON_CPP_COMM_PREFIX}_ftd2xx "${BUILD_TYPES}" "FalconCommFTD2XX.cpp" ${DEBUG_DEFINES} "${LIBFTD2XX_LIBRARIES}" FALSE)
ENDIF(LIBFTD2XX_FOUND)
