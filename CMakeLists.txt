CMAKE_MINIMUM_REQUIRED(VERSION 2.6.0 FATAL_ERROR)

#setting link directory policy

IF(COMMAND cmake_policy)
  CMAKE_POLICY(SET CMP0003 NEW)
ENDIF(COMMAND cmake_policy)

#taken from http://www.cmake.org/pipermail/cmake/2006-February/008334.html

MACRO(SET_COMPILE_FLAGS TARGET)
   SET(FLAGS)
   FOREACH(flag ${ARGN})
     SET(FLAGS "${FLAGS} ${flag}")
   ENDFOREACH(flag)
   SET_TARGET_PROPERTIES(${TARGET} PROPERTIES COMPILE_FLAGS "${FLAGS}")
ENDMACRO(SET_COMPILE_FLAGS)

PROJECT(LIBNIFALCON)
SET(CMAKE_MODULE_PATH "./cmake_modules/")
IF(NOT WIN32)
  FIND_PACKAGE(libusb)
  FIND_PACKAGE(libftd2xx)
  FIND_PACKAGE(libftdi)
  FIND_PACKAGE(GLUT)
  FIND_PACKAGE(GLUI)
  FIND_PACKAGE(GMTL)
  FIND_PACKAGE(OpenSceneGraph)
  FIND_PACKAGE(ODE)
  FIND_PACKAGE(Boost 1.34.1 COMPONENTS thread)
ELSE(NOT WIN32)
  SET(LIBFTD2XX_FOUND TRUE)
  SET(LIBUSB_FOUND TRUE)
  SET(LIBFTDI_FOUND TRUE)
ENDIF(NOT WIN32)
SET(EXECUTABLE_OUTPUT_PATH ${CMAKE_CURRENT_SOURCE_DIR}/bin)
SET(LIBRARY_OUTPUT_PATH ${CMAKE_CURRENT_SOURCE_DIR}/lib)
SET(LIBNIFVERSION 0.6)
SET(LIBNIFALCON_FTD2XX "nifalcon_ftd2xx")
SET(LIBNIFALCON_LIBFTDI "nifalcon_libftdi")
SET(LIBNIFALCON_CPP "nifalcon_cpp")
SET(LIBNIFALCON_CPP_COMM_LIBFTDI "nifalcon_comm_libftdi")
SET(LIBNIFALCON_CPP_COMM_FTD2XX "nifalcon_comm_ftd2xx")
SET(LIBNIFALCON_CPP_KINEMATIC_STAMPER "nifalcon_kinematic_stamper")
SET(LIBMATH "m")

SET(INCLUDE_INSTALL_DIR /usr/local/include)
SET(LIBRARY_INSTALL_DIR /usr/local/lib)
SET(RUNTIME_INSTALL_DIR /usr/local/bin)

ADD_SUBDIRECTORY(src)
ADD_SUBDIRECTORY(examples)
